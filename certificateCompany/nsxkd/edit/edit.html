<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chỉnh sửa NSXKD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
<div class="container-fluid py-3 position-relative">
    <!-- Tab Navigation -->
    <ul class="nav nav-tabs mb-4" id="nsxkdTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab" aria-controls="info" aria-selected="true">Thông tin NSXKD</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab" aria-controls="products" aria-selected="false">Sản phẩm</button>
        </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content" id="nsxkdTabContent">
        <!-- Tab 1: Thông tin NSXKD -->
        <div class="tab-pane fade show active" id="info" role="tabpanel" aria-labelledby="info-tab">
            <div class="row g-3">
                <!-- Section 1: Thông tin cơ bản (8/12) -->
                <div class="col-md-8">
                    <div class="accordion" id="basicInfoAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBasicInfo" aria-expanded="true" aria-controls="collapseBasicInfo">
                                    Thông tin cơ bản
                                </button>
                            </h2>
                            <div id="collapseBasicInfo" class="accordion-collapse collapse show" data-bs-parent="#basicInfoAccordion">
                                <div class="accordion-body">
                                    <div class="row g-3">
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Mã NSXKD</label>
                                            <input type="text" class="form-control" id="nsxkdCode">
                                        </div>
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Tên NSXKD</label>
                                            <input type="text" class="form-control" id="nsxkdName">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-medium">Số điện thoại</label>
                                            <input type="text" class="form-control" id="phoneNumber">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-medium">Email</label>
                                            <input type="email" class="form-control" id="email">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-medium">Mã số thuế</label>
                                            <input type="text" class="form-control" id="mst">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label fw-medium">Địa chỉ</label>
                                            <input type="text" class="form-control" id="address">
                                        </div>
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Ghi chú</label>
                                            <textarea class="form-control" id="note" rows="3"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Thông tin bổ sung (4/12) -->
                <div class="col-md-4">
                    <div class="accordion" id="additionalInfoAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAdditionalInfo" aria-expanded="true" aria-controls="collapseAdditionalInfo">
                                    Thông tin bổ sung
                                </button>
                            </h2>
                            <div id="collapseAdditionalInfo" class="accordion-collapse collapse show" data-bs-parent="#additionalInfoAccordion">
                                <div class="accordion-body">
                                    <div class="row g-3">
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Logo</label>
                                            <div id="logoContainer" class="position-relative mb-2">
                                                <img id="logo" src="" alt="Logo" style="max-height: 100px; max-width: 100%;">
                                                <button class="btn btn-sm btn-danger position-absolute top-0 end-0 remove-image-btn" id="removeLogoBtn" style="display: none; z-index: 1;"><i class="bi bi-x-lg"></i></button>
                                            </div>
                                            <input type="file" class="form-control" id="logoInput" accept="image/*">
                                        </div>
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Ảnh ĐKKD</label>
                                            <div id="dkkdContainer" class="mb-2">
                                                <div class="row g-2" id="dkkdImages">
                                                    <div class="col-6 position-relative">
                                                        <img id="dkkd1" src="" alt="Ảnh ĐKKD 1" style="max-height: 100px; max-width: 100%;">
                                                        <button class="btn btn-sm btn-danger position-absolute top-0 end-0 remove-image-btn" id="removeDkkdBtn1" style="display: none; z-index: 1;"><i class="bi bi-x-lg"></i></button>
                                                    </div>
                                                    <div class="col-6 position-relative">
                                                        <img id="dkkd2" src="" alt="Ảnh ĐKKD 2" style="max-height: 100px; max-width: 100%;">
                                                        <button class="btn btn-sm btn-danger position-absolute top-0 end-0 remove-image-btn" id="removeDkkdBtn2" style="display: none; z-index: 1;"><i class="bi bi-x-lg"></i></button>
                                                    </div>
                                                </div>
                                            </div>
                                            <input type="file" class="form-control" id="dkkdInput" accept="image/*" multiple>
                                        </div>
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Trạng thái</label>
                                            <select class="form-select" id="status">
                                                <option value="Đang hoạt động">Đang hoạt động</option>
                                                <option value="Khóa">Khóa</option>
                                            </select>
                                        </div>
                                        <div class="col-md-12">
                                            <label class="form-label fw-medium">Thời gian liên kết</label>
                                            <p id="linkedDate" class="mb-0"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Sản phẩm -->
        <div class="tab-pane fade" id="products" role="tabpanel" aria-labelledby="products-tab">
            <div class="content-wrapper">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="mb-0">Danh sách sản phẩm</h2>
                    <div class="d-flex gap-2">
                        <!-- Nút chuyển đổi view (desktop) -->
                        <div class="d-none d-md-flex gap-2">
                            <button class="btn btn-outline-secondary" id="toggleTableViewBtn" title="Chuyển sang Bảng"><i class="bi bi-table"></i></button>
                            <button class="btn btn-outline-secondary" id="toggleCardViewBtn" title="Chuyển sang Card"><i class="bi bi-grid"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Table View -->
                <div class="table-responsive d-none" id="tableView">
                    <table class="table table-hover table-bordered align-middle">
                        <thead class="table-light">
                            <tr>
                                <th class="text-center col-1">STT</th>
                                <th class="col-2">Mã sản phẩm</th>
                                <th class="col-3">Tên sản phẩm</th>
                                <th class="col-2">Loại sản phẩm</th>
                                <th class="col-2">Ngày phân quyền</th>
                                <th class="col-1">Trạng thái</th>
                                <th class="text-center col-1">Hành động</th>
                            </tr>
                        </thead>
                        <tbody id="productTableBody"></tbody>
                    </table>
                </div>

                <!-- Card Grid View -->
                <div class="row row-cols-1 row-cols-md-2 g-3 d-none" id="cardGridView"></div>

                <!-- Add Product Button -->
                <div class="mt-3">
                    <button class="btn btn-primary" id="addProductBtn"><i class="bi bi-plus-lg me-1"></i> Thêm sản phẩm</button>
                </div>

                <!-- Pagination -->
                <div class="d-flex justify-content-between align-items-center mt-3">
                    <div class="d-flex align-items-center">
                        <label class="me-2" for="itemsPerPage">Số bản ghi trên trang:</label>
                        <select class="form-select w-auto" id="itemsPerPage">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                        </select>
                    </div>
                    <div class="d-flex align-items-center">
                        <nav aria-label="Page navigation"><ul class="pagination mb-0" id="pagination"></ul></nav>
                        <span class="ms-3 text-muted" id="resultCount">0/0 kết quả</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fixed Action Buttons -->
    <div class="fixed-bottom bg-white p-3 shadow-sm d-flex justify-content-end gap-2" style="z-index: 1000;">
        <button class="btn btn-outline-secondary" id="backBtn">Quay lại</button>
        <button class="btn btn-primary" id="confirmBtn">Xác nhận</button>
    </div>

    <!-- Loading Spinner -->
    <div class="d-none position-fixed top-50 start-50 translate-middle" id="loadingSpinner">
        <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="edit.js"></script>
</body>
</html>